<div
  (mouseover)="formCharge()"
  class="fixed top-0 right-0 flex flex-col justify-center w-1/2 h-screen p-12 bg-white"
>
  <button
    (click)="closeForm()"
    class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 absolute top-2.5 left-2.5 inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white"
  >
    <svg
      aria-hidden="true"
      class="w-5 h-5"
      fill="currentColor"
      viewBox="0 0 20 20"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
        clip-rule="evenodd"
      ></path>
    </svg>
    <span class="sr-only">Close menu</span>
  </button>
  <form [formGroup]="form" (ngSubmit)="(form.valid)">
    <div class="flex gap-2" formGroupName="etudiant">
      <div class="w-full">
        <label for="matricule">Matricule</label>
        <input
          readonly="true"
          placeholder="matricule"
          type="text"
          id="matricule"
          formControlName="matricule"
          name="matricule"
          [ngClass]="{
            'w-full block rounded-lg border dark:border-none dark:bg-neutral-600 py-[9px] px-3 pr-4 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none': true,
          }"
        />
      </div>
      <div class="w-full">
        <label for="nomComplet">prenom et nom</label>
        <input
          (keyup)="onMatriculeInit()"
          placeholder="prenom et nom"
          type="text"
          id="nomComplet"
          formControlName="nomComplet"
          name="nomComplet"
          [ngClass]="{
            'w-full block rounded-lg border dark:border-none dark:bg-neutral-600 py-[9px] px-3 pr-4 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none': true,
            'bg-red-50 border border-red-500 text-red-900 placeholder-red-700':
              etudiant.controls['nomComplet'].errors &&
              (etudiant.controls['nomComplet'].dirty ||
                etudiant.controls['nomComplet'].touched)
          }"
        />
        @if (etudiant.controls['nomComplet'].errors &&
        (etudiant.controls['nomComplet'].dirty ||
        etudiant.controls['nomComplet'].touched)) { @if
        (etudiant.controls['nomComplet'].errors['required']) {
        <p class="mt-2 text-sm text-red-600 dark:text-red-500">
          <span class="font-medium">le nomComplet </span> est obligatoire.
        </p>
        } }
      </div>
      <div class="w-full mb-4">
        <label for="telephone">Telephone</label>
        <input
          (keyup)="onMatriculeInit()"
          placeholder="telephone"
          type="tel"
          id="telephone"
          formControlName="telephone"
          name="telephone"
          [ngClass]="{
            'w-full block rounded-lg border dark:border-none dark:bg-neutral-600 py-[9px] px-3 pr-4 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none': true,
            'bg-red-50 border border-red-500 text-red-900 placeholder-red-700':
              etudiant.controls['telephone'].errors &&
              (etudiant.controls['telephone'].dirty ||
                etudiant.controls['telephone'].touched)
          }"
        />
        @if (etudiant.controls['telephone'].errors &&
        (etudiant.controls['telephone'].dirty ||
        etudiant.controls['telephone'].touched)) { @if
        (etudiant.controls['telephone'].errors['required']) {
        <p class="mt-2 text-sm text-red-600 dark:text-red-500">
          <span class="font-medium">le telephone </span> est obligatoire.
        </p>
        } @if (!etudiant.controls['telephone'].errors['required']) {
        <p class="mt-2 text-sm text-red-600 dark:text-red-500">
          <span class="font-medium">le minimun </span> est 9 chiffre.
        </p>
        } }
      </div>
    </div>
    <div class="mb-4">
      <label for="anneeScolaire">Annee Scolaire</label>
      <div class="flex">
        <input
          [ngClass]="{
            'w-1/3  block rounded-lg border dark:border-none dark:bg-neutral-600 py-[3px] px-3 pr-4 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none': true,
            'bg-red-50 border border-red-500 text-red-900 placeholder-red-700':
              form.controls['anneeScolaire'].errors &&
              (form.controls['anneeScolaire'].dirty ||
                form.controls['anneeScolaire'].touched)
          }"
          type="text"
          (keyup)="searchAnneeScolaire()"
          placeholder="search..."
          name="searchAnnee"
          id=""
          formControlName="searchAnnee"
        />
        <ng-select
          id="anneeScolaire"
          name="anneeScolaire"
          placeholder="annee Scolaire"
          class="block w-full text-sm border rounded-lg bg-slate-300 dark:border-none dark:bg-neutral-600 focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none"
          formControlName="anneeScolaire"
          [ngClass]="{
            'w-full block rounded-lg border dark:border-none dark:bg-neutral-600 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none': true,
            'bg-red-50 border border-red-500 text-red-900 placeholder-red-700':
              form.controls['anneeScolaire'].errors &&
              (form.controls['anneeScolaire'].dirty ||
                form.controls['anneeScolaire'].touched)
          }"
        >
          <ng-option *ngFor="let annee of anneeSelects" [value]="annee.id">{{
            annee.libelle
          }}</ng-option>
        </ng-select>
      </div>
      @if (form.controls['anneeScolaire'].errors &&
      (form.controls['anneeScolaire'].dirty ||
      form.controls['anneeScolaire'].touched)) {
      <p class="mt-2 text-sm text-red-600 dark:text-red-500">
        <span class="font-medium">annee Scolaire </span> obligatoire.
      </p>
      }
    </div>
    <div class="mb-4">
      <label for="classe">Classe</label>
      <div class="flex">
        <input
          [readOnly]="form.controls['anneeScolaire'].errors"
          [ngClass]="{
            'w-1/3  block rounded-lg border dark:border-none dark:bg-neutral-600 py-[3px] px-3 pr-4 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none': true,
            'bg-red-50 border border-red-500 text-red-900 placeholder-red-700':
              form.controls['classe'].errors &&
              (form.controls['classe'].dirty || form.controls['classe'].touched)
          }"
          type="text"
          (keyup)="searchClasse()"
          placeholder="search..."
          name="searchClasse"
          id=""
          formControlName="searchClasse"
        />
        <ng-select
          id="classe"
          name="classe"
          placeholder="classe"
          class="block w-full text-sm border rounded-lg bg-slate-300 dark:border-none dark:bg-neutral-600 focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none"
          formControlName="classe"
          [ngClass]="{
            'w-full block rounded-lg border dark:border-none dark:bg-neutral-600 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none': true,
            'bg-red-50 border border-red-500 text-red-900 placeholder-red-700':
              form.controls['classe'].errors &&
              (form.controls['classe'].dirty || form.controls['classe'].touched)
          }"
        >
          <ng-option *ngFor="let classe of classeSelects" [value]="classe.id">{{
            classe.libelle
          }}</ng-option>
        </ng-select>
      </div>
      @if (form.controls['classe'].errors && (form.controls['classe'].dirty ||
      form.controls['classe'].touched)) {
      <p class="mt-2 text-sm text-red-600 dark:text-red-500">
        <span class="font-medium">classe </span> obligatoire.
      </p>
      }
    </div>
    <div class="">
      <button
        type="button"
        (click)="closeForm()"
        (click)="onSubmit()"
        [disabled]="form.invalid"
        class="float-right inline-block rounded disabled:bg-slate-400 hover:bg-orange-600 text-neutral-50 shadow-[0_4px_9px_-4px_rgba(51,45,45,0.7)] hover:shadow-[0_8px_9px_-4px_rgba(51,45,45,0.2),0_4px_18px_0_rgba(51,45,45,0.1)] focus:bg-blue-800 focus:shadow-[0_8px_9px_-4px_rgba(51,45,45,0.2),0_4px_18px_0_rgba(51,45,45,0.1)] active:bg-blue-700 active:shadow-[0_8px_9px_-4px_rgba(51,45,45,0.2),0_4px_18px_0_rgba(51,45,45,0.1)] px-6 pb-2 pt-2.5 bg-orange-500 text-xs font-medium uppercase leading-normal transition duration-150 ease-in-out focus:outline-none focus:ring-0"
      >
        enregistrer
      </button>
    </div>
  </form>
</div>
