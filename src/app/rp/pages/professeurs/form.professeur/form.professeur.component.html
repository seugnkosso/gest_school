<div class="fixed top-0 right-0 flex flex-col justify-center w-1/2 h-screen p-12 bg-white">
  <button (click)="closeForm()"
    class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 absolute top-2.5 left-2.5 inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white">
    <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd"
        d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
        clip-rule="evenodd"></path>
    </svg>
    <span class="sr-only">Close menu</span>
  </button>
  <form [formGroup]="form" (ngSubmit)="form.valid">
    <div class="">
      <!-- Text input -->
      <div class="w-full mb-4">
        <label for="nomComplet">Nom et Prenom</label>
        <input [ngClass]="{
          'w-full block rounded-lg border dark:border-none dark:bg-neutral-600 py-[9px] px-3 pr-4 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none' : true,
          'bg-red-50 border border-red-500 text-red-900 placeholder-red-700': form.controls['nomComplet'].errors && (form.controls['nomComplet'].dirty || form.controls['nomComplet'].touched)
        }" placeholder="nom et prenom" type="text" id="nomComplet" name="nomComplet" formControlName="nomComplet" />
        @if (form.controls['nomComplet'].errors && (form.controls['nomComplet'].dirty ||
        form.controls['nomComplet'].touched)) {
        <p class="mt-2 text-sm text-red-600 dark:text-red-500"><span class="font-medium">le nom et prenom est</span> est
          obligatoire.</p>
        }
      </div>
      <!-- Text input -->
      <div class="w-full mb-4">
        <label for="telephone">Telephone</label>
        <input placeholder="telephone" type="tel" id="telephone" formControlName="telephone" name="telephone" [ngClass]="{
          'w-full block rounded-lg border dark:border-none dark:bg-neutral-600 py-[9px] px-3 pr-4 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none' : true,
          'bg-red-50 border border-red-500 text-red-900 placeholder-red-700': form.controls['telephone'].errors && (form.controls['telephone'].dirty || form.controls['telephone'].touched)
        }" />
        @if (form.controls['telephone'].errors && (form.controls['telephone'].dirty ||
        form.controls['telephone'].touched)) {
        @if (form.controls["telephone"].errors['required']) {
        <p class="mt-2 text-sm text-red-600 dark:text-red-500"><span class="font-medium">le telephone </span> est
          obligatoire.</p>
        }
        @if (!form.controls["telephone"].errors['required']) {
        <p class="mt-2 text-sm text-red-600 dark:text-red-500"><span class="font-medium">le minimun </span> est
          9 chiffre.</p>
        }
        }
      </div>
      <!-- Text input -->
      <div class="w-full mb-4">
        <label for="email">email</label>
        <input placeholder="Mail" type="email" id="email" formControlName="email" name="email" [ngClass]="{
          'w-full block rounded-lg border dark:border-none dark:bg-neutral-600 py-[9px] px-3 pr-4 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none' : true,
          'bg-red-50 border border-red-500 text-red-900 placeholder-red-700': form.controls['email'].errors && (form.controls['email'].dirty || form.controls['email'].touched)
        }" />
        @if (form.controls['email'].errors && (form.controls['email'].dirty ||
        form.controls['email'].touched)) {
        <p class="mt-2 text-sm text-red-600 dark:text-red-500"><span class="font-medium">l'email </span> est
          obligatoire.</p>
        }
      </div>
      <!-- Text input -->
      <div class="w-full mb-4">
        <label for="username">UserName</label>
        <input placeholder="username" type="tel" id="username" name="username" formControlName="username" [ngClass]="{
          'w-full block rounded-lg border dark:border-none dark:bg-neutral-600 py-[9px] px-3 pr-4 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none' : true,
          'bg-red-50 border border-red-500 text-red-900 placeholder-red-700': form.controls['username'].errors && (form.controls['username'].dirty || form.controls['username'].touched)
        }" />
        @if (form.controls['username'].errors && (form.controls['username'].dirty ||
        form.controls['username'].touched)) {
        <p class="mt-2 text-sm text-red-600 dark:text-red-500"><span class="font-medium">username </span> est
          obligatoire.</p>
        }
      </div>
    </div>
    <div class="flex gap-2 mb-4">
      <div class="w-full ">
        <label for="specialite">Specialité</label>
        <div class="flex">
          <input
          [ngClass]="{
            'w-1/3  block rounded-lg border dark:border-none dark:bg-neutral-600 py-[3px] px-3 pr-4 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none' : true,
            'bg-red-50 border border-red-500 text-red-900 placeholder-red-700': form.controls['specialite'].errors && (form.controls['specialite'].dirty || form.controls['specialite'].touched)
          }"
          type="text" (keyup)="searchSpecialite()" placeholder="search..." name="searchSpecilite" id=""
            formControlName="searchSpecilite"
            >
          <ng-select id="specialite" name="specialite" placeholder="spécialité"
            class="block w-full text-sm border rounded-lg bg-slate-300 dark:border-none dark:bg-neutral-600 focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none"
            formControlName="specialite" [ngClass]="{
              'w-full block rounded-lg border dark:border-none dark:bg-neutral-600 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none' : true,
              'bg-red-50 border border-red-500 text-red-900 placeholder-red-700': form.controls['specialite'].errors && (form.controls['specialite'].dirty || form.controls['specialite'].touched)
            }">
            <ng-option *ngFor="let specialite of specialiteSelects"
              [value]="specialite.id">{{specialite.libelle}}</ng-option>
          </ng-select>
        </div>
        @if (form.controls['specialite'].errors && (form.controls['specialite'].dirty ||
        form.controls['specialite'].touched)) {
        <p class="mt-2 text-sm text-red-600 dark:text-red-500"><span class="font-medium">spécialté </span> obligatoire.</p>
        }
      </div>
      <div class="w-full">
        <label for="Grades">Grades</label>
        <div class="flex">
          <input [ngClass]="{
            'w-1/3  block rounded-lg border dark:border-none dark:bg-neutral-600 py-[3px] px-3 pr-4 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none' : true,
            'bg-red-50 border border-red-500 text-red-900 placeholder-red-700': form.controls['grades'].errors && (form.controls['grades'].dirty || form.controls['grades'].touched)
          }" type="text" (keyup)="searchGrade()" placeholder="search..." name="searchGrade" id=""
            formControlName="searchGrade"
            class="w-1/3 block rounded-lg border dark:border-none dark:bg-neutral-600 py-[3px] px-3 pr-4 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none">
          <ng-select
          [ngClass]="{
            'w-full block rounded-lg border dark:border-none dark:bg-neutral-600 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-400 focus:outline-none' : true,
            'bg-red-50 border border-red-500 text-red-900 placeholder-red-700': form.controls['grades'].errors && (form.controls['grades'].dirty || form.controls['grades'].touched)
          }" id="grades" name="grades" [multiple]="true" [closeOnSelect]="false" placeholder="grades"
            formControlName="grades">
            <ng-option *ngFor="let grade of gradeSelects"
              [value]="grade.id">{{grade.libelle}}</ng-option>
          </ng-select>
        </div>
        @if (form.controls['grades'].errors && (form.controls['grades'].dirty ||
        form.controls['grades'].touched)) {
        <p class="mt-2 text-sm text-red-600 dark:text-red-500"><span class="font-medium">au moins </span> un grade.</p>
        }
      </div>
    </div>

    <div class="">
      <button type="button" (click)="closeForm()" (click)="onSubmit()" [disabled]="form.invalid"
        class="float-right inline-block rounded disabled:bg-slate-400 hover:bg-orange-600 text-neutral-50 shadow-[0_4px_9px_-4px_rgba(51,45,45,0.7)]  hover:shadow-[0_8px_9px_-4px_rgba(51,45,45,0.2),0_4px_18px_0_rgba(51,45,45,0.1)] focus:bg-blue-800 focus:shadow-[0_8px_9px_-4px_rgba(51,45,45,0.2),0_4px_18px_0_rgba(51,45,45,0.1)] active:bg-blue-700 active:shadow-[0_8px_9px_-4px_rgba(51,45,45,0.2),0_4px_18px_0_rgba(51,45,45,0.1)] px-6 pb-2 pt-2.5  bg-orange-500 text-xs font-medium uppercase leading-normal transition duration-150 ease-in-out focus:outline-none focus:ring-0">enregistrer</button>
    </div>
  </form>
</div>
